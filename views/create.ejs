<html lang="en">
<%- include("./partials/head.ejs") %>

<body>
  <%- include("./partials/nav.ejs") %>

  <div class="create-run content">
    <form action="/runs" method="POST">

      <label for="name">Run Name:</label>
      <input type="text" placeholder="Ex. Morning Run" id="name" name="name" required>

      <label for="distance">Distance (mi):</label>
      <input type="number" id="distance" name="distance" step=".01" required>

      <label for="duration">Duration (HH:MM:SS):</label>
      <input type="text" id="duration" name="duration" pattern="(^([0-1]?\d|2[0-3]):([0-5]?\d):([0-5]?\d)$)|(^([0-5]?\d):([0-5]?\d)$)|(^[0-5]?\d$)
      " title="Please enter duration in HH:MM:SS format" required>

      <label for="date">Date:</label>
      <input type="date" id="date" name="date" required>

      <label for="notes">Run Notes:</label>
      <textarea type="text" id="notes" name="notes"></textarea>

      <div style="text-align: center; margin-top: 20px;">
        <button onclick="formatDuration()">Submit</button>
      </div>
    </form>
  </div>

</body>
</html>

<script>
function formatDuration() {
    const durationInput = document.getElementById('durationInput');
    const durationValue = durationInput.value.trim();

    // Split the duration string by ':'
    const parts = durationValue.split(':');

    if (parts.length === 2) {
        // Duration does not include hours, add '0:' to the beginning
        durationInput.value = `0:${durationValue}`;
    } else if (parts.length === 3) {
        // Duration already includes hours
        durationInput.value = durationValue;
    } else {
        // Invalid duration format
        console.error('Invalid duration format');
    }
}
</script>

